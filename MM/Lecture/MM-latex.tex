\documentclass{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{multicol}
\usepackage{enumitem}

\title{Microprocessors and Micro controllers \\ CSE3815}
\author{Fairuz Bilquis Khan}
\date{April 2024}

\begin{document}
\maketitle
\newpage
\section*{Evolution of Microprocessors}
There should be overview chart of difference between intel 4004 to pentium 4.
\newpage
\subsection*{Microprocessors:}
\begin{verbatim}
    `-->Is a semiconductor device consisting of electronics logic circuit.
    `--->Manufactured by using various fabrication schemes.
    `---->Capable of performing computing functions.
    `----->Capable of transporting data/information.

    Can be divided into 3 segments:
        (-)Arithmetic adn logic unit
        (-)Registers unit
        (-)Control unit
\end{verbatim}

\subsection*{Von Neumann Machine:}
\begin{verbatim}
    Von Neumann machine may refer to: Von Neumann architecture, a conceptual model
    of nearly all computer architecture

    Three key concepts:
    (-)Data and instructions are stored in a single set of read-write memory.
    (-)Contents of memory are accessed by memory address without regard to the type
        of data.
    (-)Execution occurs in a sequential fashion, unless explicitly stated otherwise.
\end{verbatim}

\subsection*{Computer System Components:}
\begin{verbatim}
    (-) Memory:
            Stores data and instructions.
    (-) Input/Output:
            Called peripherals.
            Used to input and output data and instructions.
    (-) Arithmetic and Logic Unit:
            Performs arithmetic(+, -)  operations.
            Performs logical(AND, OR, XOR, Shift, Rotate) operations.
    (-) Control Unit:
            Coordinates the execution of instructions by managing the flow of data 
                between the CPU's components.
    (-) System Interconnection and Interaction:
            (+)BUS: A group of lines used to transfer bits between µp and other components.
                    Bus is used to communicate between parts of the computer. There is only
                    one transmitter at a time and only the addressed device can respond.
                    ^\types:
                        >> address
                        >> data
                        >> control
   
        \end{verbatim}
\newpage
\subsection*{CPU Components:}
\begin{verbatim}
    (-) Registers:
            Small, fast storage in the CPU for data, instructions and other items.
            Includes the program counter (PC) and memory address registers (MAR).
            These registers need to match the width of the address bus for proper 
                memory access.
            Data registers should match memory word size for efficient data transfer.
    (-) Control Unit:
            Generates control signals which are necessary for execution of instructions.
            Connect registers to the bus.
            Controls the data flow between CPU and peripheral components.
            Provides status, control and timing signals required for the operations of
                memory and I/O devices.
            Acts as a brain of computer system.
            All actions of the control unit are associated with the decoding and execution
                of instructions(fetch and execute cycles).
    (-) Arithmetic and Logic Unit:
            Execute arithmetic and logical operations.
            Accumulator is a special 8-bit register associated with ALU. Register 'A' in
                8085 is an accumulator.
            Source of one of the operands of an arithmetic or logical operation serves as
                one input to ALU.
            Final result of an arithmetic or logical operation is placed in the accumulator.
\end{verbatim}

\subsection*{Arithmetic and Logic Unit:}
\begin{verbatim}
    ALU performs the following arithmetic and logical operations:
        >> Addition
        >> Subtraction
        >> AND
        >> OR
        >> XOR
        >> NOT
        >> Increment
        >> Decrement
        >> Left Shift, Right Shift, Rotate .
        >> Clear etc.
\end{verbatim}
\newpage

\begin{verbatim}
    Status Flag:
        Intel 8085 microprocessor contains five flip-flops to serve as status flags.
        These flip-flops are set or reset according to the conditions which arise due
            to an arithmetic & logical operation.

            Sign Flag (S): Indicates the sign of the result after an arithmetic operation.
            Zero Flag (Z): Indicates whether the result of an operation is zero.
            Auxiliary Carry Flag (AC): Indicates use for decimal arithmetic operations.
            Parity Flag (P): Indicates the parity of the result.
            Carry Flag (CY): Indicates whether there is a carry-out from the most 
                                significant bit.
\end{verbatim}

\textbf{next is difference between 8085 and 8086 architecture diagram (will add later . not needed for Ct)}
\newpage
\section*{The Microprocessor and its Architecture}
\subsection*{Internal Microprocessor Architecture:}

\begin{verbatim}
    Program or instructions are written based of microprocessor's internal configuration.
    In multiple core processors, each core contains the same programming model.
    Each core runs as a separate task or thread simultaneously.
    A thread consists of 
        >> a program counter
        >> a register set, and
        >> a stack space
    A task shares with peer threads its code section, data section and operating system
        resources.
\end{verbatim}

\subsection*{The programming Models:}

\begin{verbatim}
    8086 through Core2 registers are considered program-visible. While other registers
        are considered program-invisible.
        >> program-visible registers are used during programming while are directly
            specified by the instructions.
        >> program-invisible registers are not addressable directly during applications
            programming. 
    80286 and above contain program-invisible registers to control and operate protected
        memory and other features of the microprocessor.
    80386 through Core2 microprocessors contain full 32-bit internal architecture.
    8086 through 80286 are fully upward compatible to the 80386 through Core2.
\end{verbatim}
\vspace*{20pt}

\textbf{Intel Microprocessor Evolution:}\\

\textbf{4004} $\rightarrow$ \textbf{8008} $\rightarrow$ \textbf{8080} $\rightarrow$ \textbf{8085} $\rightarrow$ \textbf{8086/8088} $\rightarrow$ \textbf{80286} $\rightarrow$ \textbf{80386} $\rightarrow$ \textbf{80486} $\rightarrow$ \textbf{Pentium} $\rightarrow$ \textbf{Pentium Pro} $\rightarrow$ \textbf{Pentium II} $\rightarrow$ \textbf{Pentium III} $\rightarrow$ \textbf{Pentium 4} $\rightarrow$ \textbf{Core} $\rightarrow$ \textbf{Core 2}

\subsection*{Multipurpose Registers:}
\begin{verbatim}
    RAX is a versatile register with different sizes: 64-bit as RAX, 32-bit as 
        REAX (accumulator), 16-bit as AX, or split into two 8-bit registers,
        AH and AL.
    EAX, known as the accumulator, handles math operations like multiplication
        and division.
    Intel aims to extend the address bus to 52 bits, allowing access to 4 petabytes
        (4P) of memory.
\end{verbatim}

\newpage
\subsection*{Address Space(Main Memory: RAM):}

\begin{itemize}
    \item With a 16-bit address bus, it can access 64 kilobytes of memory.
    \item Expanding to a 20-bit address bus allows access to 1 megabyte.
    \item A 32-bit address bus extends access to 4 gigabytes.
    \item Progressing to a 34-bit address bus increases the capacity to 16 gigabytes.
    \item A 36-bit address bus reaches 64 gigabytes.
    \item Expanding further to a 38-bit address bus accesses 256 gigabytes.
    \item Intel's plan for a 52-bit address bus would enable access to a massive 1015 bytes of memory.
\end{itemize}

\begin{itemize}
    \item \textbf{RBX:} Addressable as RBX, EBX, BX, BH, BL.
    \begin{itemize}
        \item RBX register (base index) sometimes holds the offset address of a location in the memory system in all versions of the microprocessor.
    \end{itemize}
    
    \item \textbf{RCX:} Addressable as RCX, ECX, CX, CH, or CL.
    \begin{itemize}
        \item RCX, a (count) general-purpose register, also holds the count for various instructions.
    \end{itemize}
    
    \item \textbf{RDX:} Addressable as RDX, EDX, DX, DH, or DL.
    \begin{itemize}
        \item RDX, a (data) general-purpose register, holds a part of the result from a multiplication or part of the dividend before a division.
    \end{itemize}
    
    \item \textbf{RBP:} Addressable as RBP, EBP, or BP.
    \begin{itemize}
        \item RBP points to a memory (base pointer) location for memory data transfers.
    \end{itemize}
    
    \item \textbf{RDI:} Addressable as RDI, EDI, or DI.
    \begin{itemize}
        \item RDI often addresses the destination index string destination data for the string instructions.
    \end{itemize}
    
    \item \textbf{RSI:} Addressable as RSI, ESI, or SI.
    \begin{itemize}
        \item RSI, the source index register, addresses source string data for the string instructions. Like RDI, RSI also functions as a general-purpose register.
    \end{itemize}
    
    \item \textbf{R8 - R15:} Found in the Pentium 4 and Core2 if 64-bit extensions are enabled.
    \begin{itemize}
        \item Data are addressed as 64-, 32-, 16-, or 8-bit sizes and are of general-purpose.
    \end{itemize}
\end{itemize}

\subsection*{Special-Purpose Registers:}

\begin{itemize}
    \item \textbf{RIP:} Addressable as RIP.
    \begin{itemize}
        \item RIP addresses the next instruction in a section of memory, defined as the instruction pointer in a code segment.
    \end{itemize}
    
    \item \textbf{RSP:} Addressable as RSP.
    \begin{itemize}
        \item RSP addresses an area of memory called the stack. The stack pointer stores data through this pointer.
    \end{itemize}
    
    \item \textbf{RFLAGS:} 
    \begin{itemize}
        \item RFLAGS indicate the condition of the microprocessor and control its operation. Flags are upward-compatible from the 8086/8088 through Core2. The rightmost five and the overflow flag are changed by most arithmetic and logic operations, although data transfers do not affect them. Flags never change for any data transfer or program control operation. Some of the flags are also used to control features found in the microprocessor.
    \end{itemize}
    
    \item \textbf{Segment Registers:} Include CS, DS, ES, SS, FS, and GS.
\end{itemize}

\subsection*{List of Each Flag bit, with a brief description of function:}

\begin{itemize}
    \item \textbf{C (Carry):} Holds the carry after addition or borrow after subtraction. Also indicates error conditions.
    
    \item \textbf{P (Parity):} Is the count of ones in a number expressed as even or odd. Logic 0 for odd parity; logic 1 for even parity. If a number contains three binary one bits, it has odd parity; If a number contains no one bits, it has even parity.
    
    \item \textbf{A (Auxiliary Carry):} Holds the carry (half-carry) after addition or the borrow after subtraction between bit positions 3 and 4 of the result.
    
    \item \textbf{Z (Zero):} Shows that the result of an arithmetic or logic operation is zero.
    
    \item \textbf{S (Sign):} Flag holds the arithmetic sign of the result after an arithmetic or logic instruction executes.
    
    \item \textbf{T (Trap):} The trap flag enables trapping through an on-chip debugging feature.
    
    \item \textbf{I (Interrupt):} Controls operation of the INTR (interrupt request) input pin.
    
    \item \textbf{D (Direction):} Selects increment or decrement mode for the DI and/or SI registers.
    
    \item \textbf{O (Overflow):} Occurs when signed numbers are added or subtracted. An overflow indicates the result has exceeded the capacity of the machine.
    
    \item \textbf{IOPL (Input/Output Privilege Level):} Used in protected mode operation to select the privilege level for I/O devices.
    
    \item \textbf{NT (Nested Task):} Flag indicates the current task is nested within another task in protected mode operation.
    
    \item \textbf{RF (Resume):} Used with debugging to control resumption of execution after the next instruction.
    
    \item \textbf{VM (Virtual Mode):} Flag bit selects virtual mode operation in a protected mode system.
    
    \item \textbf{AC (Alignment Check):} Flag bit activates if a word or doubleword is addressed on a non-word or non-doubleword boundary.
    
    \item \textbf{VIF (Virtual Interrupt):} Is a copy of the interrupt flag bit available to the Pentium 4–(virtual interrupt).
    
    \item \textbf{VIP (Virtual Interrupt Pending):} Provides information about a virtual mode interrupt for Pentium. Used in multitasking environments to provide virtual interrupt flags.
    
    \item \textbf{ID (Identification):} Flag indicates that the Pentium microprocessors support the CPUID instruction. CPUID instruction provides the system with information about the Pentium microprocessor such as its version number and manufacturer.
\end{itemize}

\subsection*{Memory Addresses and Segment Registers}

Generate memory addresses when combined with other registers in the microprocessor.

\subsection*{Segment Registers:}
Four or six segment registers in various versions of the microprocessor. A segment register functions differently in real mode than in protected mode. Following is a list of each segment register, along with its function in the system.

\begin{itemize}
    \item \textbf{CS (Code):} Holds code (programs and procedures) used by the microprocessor.
    
    \item \textbf{DS (Data):} Contains most data used by a program. Data are accessed by an offset address or contents of other registers that hold the offset address.
    
    \item \textbf{ES (Extra):} An additional data segment used by some instructions to hold destination data.
    
    \item \textbf{SS (Stack):} Defines the area of memory used for the stack. The stack entry point is determined by the stack segment and stack pointer registers. The BP register also addresses data within the stack segment.
    
    \item \textbf{FS and GS Segments:} Supplemental segment registers available in 80386–Core2 microprocessors. They allow two additional memory segments for access by programs. Windows uses these segments for internal operations, but no definition of their usage is available.
\end{itemize}

\section*{Real Mode Memory Addressing}

80286 and above operate in either the real or protected mode. Real mode operation allows addressing of only the first 1M byte of memory space—even in Pentium 4 or Core2 microprocessor. The first 1M byte of memory is called the real memory, conventional memory, or DOS memory system.

\newpage

\subsection*{Segments and Offsets:}
\begin{itemize}
    \item All real mode memory addresses must consist of a segment address plus an offset address.
    \item The segment address defines the beginning address of any 64K-byte memory segment.
    \item The offset address selects any location within the 64K byte memory segment.
    \end{itemize}
\textbf{Memory address = (Segment Address * 10) + Offset}

\begin{verbatim}
    Once the beginning address is known, the ending address is found by adding FFFFH because
        a real mode segment of memory is 64K in length. The offset address is always added 
        to the segment starting address to locate the data. Segment and offset addresses 
        are sometimes written as 1000:2000.

    Suppose a segment address of 1000H and an offset of 246FH.
    Now find the memory location:    
\end{verbatim}

\[
\text{Memory location} = (\text{Segment Address} \times 10) + \text{Offset}
\]
\[
= (1000 \times 10)_{\text{H}} + 246F_{\text{H}}
\]
\[
= 10000_{\text{H}} + 246F_{\text{H}}
\]
\[
= 1246F_{\text{H}}
\]


\end{document}